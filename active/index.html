<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>VERN MAX - HOME</title>
  <link rel="stylesheet" href="../css/style.css" /> 
  
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="icon" type="image/png" href="../images/title-mini.png" /> 
  <link rel="shortcut icon" type="image/png" href="../images/title-mini.png" /> 
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <style>
    /* Embedded styles will complement or override ../css/style.css */
    html {
      background-color: #131314; 
      height: 100%;
      box-sizing: border-box;
    }
    *, *:before, *:after {
      box-sizing: inherit;
    }
    body {
      margin: 0;
      min-height: 100vh;
      font-family: 'PrimaryFont', sans-serif; /* Assumes PrimaryFont is defined in style.css or linked */
      /* Updated gradient to a darker purple at the bottom */
      background: linear-gradient(to bottom, #6720bd, #5e1cad); 
      background-attachment: fixed;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }

    #starsCanvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: -1;
    }

    .search-interface-frame {
      background-color: #ffffff; 
      color: #333333; 
      border-radius: 30px; 
      padding: 20px; 
      max-width: 1000px; 
      width: 95%;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: 0 12px 30px rgba(0,0,0,0.12), 0 4px 12px rgba(0,0,0,0.08); 
      border: 1px solid rgba(103, 32, 189, 0.1); 
      position: relative;
      z-index: 1;
      margin-top: 70px; 
      overflow-y: auto;
      max-height: calc(100vh - 110px); 
    }

    #header-logo-container {
      text-align: center;
      position: absolute;
      top: -85px; 
      left: 50%;
      transform: translateX(-50%);
      z-index: 2;
      width: 100%;
    }

    #bigTitle {
      max-width: 170px; 
      height: auto;
      filter: drop-shadow(0 4px 6px rgba(0,0,0,0.2)); 
    }

    .interface-title-header {
      width: 100%;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 30px; 
      background: #ffffff; 
      padding: 18px 25px; 
      border-radius: 18px; 
      box-shadow: 0 5px 18px rgba(0,0,0,0.07); 
      border: 1px solid rgba(103, 32, 189, 0.12); 
      font-family: 'PrimaryFont', sans-serif;
    }
    .interface-title {
      margin: 0;
      font-size: 2.1em; 
      font-weight: bold;
      background: linear-gradient(135deg, #6720bd 0%, #8a2be2 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      color: #6720bd; /* Fallback */
    }

    #searchElementsContainer {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    #clock {
      color: #555555; 
      font-family: 'Roboto Mono', monospace; /* Uses a monospaced font */
      font-size: 1.25rem; 
      margin-bottom: 25px; 
    }

    #uv-form {
      width: 100%;
      max-width: 1000px; 
      display: flex;
      justify-content: center;
      margin-bottom: 30px; 
      position: relative; 
    }
    #uv-address {
      width: 100%;
      padding: 16px 25px; 
      padding-left: 30px; 
      border-radius: 18px;
      font-size: 1.05rem; 
      font-family: 'PrimaryFont', sans-serif;
      background-color: #f8f9fa; 
      color: #333333; 
      border: 1px solid #ced4da; 
      box-sizing: border-box;
      box-shadow: inset 0 2px 4px rgba(0,0,0,0.06);
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }
    #uv-address::placeholder {
      color: #6c757d; 
      text-transform: uppercase; /* Make placeholder text uppercase */
    }
    #uv-address:focus {
        border-color: #8a2be2; 
        box-shadow: 0 0 0 0.2rem rgba(103, 32, 189, 0.25); 
        outline: none;
    }

    #popularSites {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 12px; 
      margin-bottom: 25px;
      width: 100%;
      max-width: 1000px;
    }
    #popularSites .btn {
      font-family: 'PrimaryFont', sans-serif;
      background-color: #f8f9fa; 
      color: #495057; 
      padding: 10px 20px; 
      text-decoration: none;
      border-radius: 10px; 
      border: 1px solid #dee2e6; 
      cursor: pointer;
      font-size: 0.8rem;
      transition: all 0.2s ease-in-out;
      text-transform: uppercase;
      font-weight: 600; 
      display: inline-flex; 
      align-items: center;
      line-height: 1.5;
    }
    #popularSites .btn:hover {
      background-color: #e9ecef; 
      border-color: #adb5bd; 
      transform: translateY(-2px); 
      box-shadow: 0 4px 8px rgba(0,0,0,0.08);
    }
    #popularSites .btn .icon { 
        margin-right: 8px;
        color: #6720bd; 
        font-size: 1.1em; 
    }


    .desc {
      width: 100%;
      max-width: 600px;
      text-align: center;
      margin-top: 15px;
    }
    #uv-error {
      color: #dc3545; 
      font-size: 0.9em;
      font-weight: 500;
    }
    /* Removed #uv-error-code from user's provided HTML, so I'm removing its style too. 
       If it's re-added, the styles from previous versions can be used. */

    .footer-label {
      position: fixed;
      bottom: 12px; 
      left: 12px;
      font-family: 'SecondaryFont', sans-serif;
      font-size: 0.75rem; 
      color: #e0e0e0; 
      z-index: 3;
      background-color: rgba(20, 20, 20, 0.75); 
      padding: 4px 8px;
      border-radius: 8px; /* Rounded to match other elements more */
      box-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }

    @media (max-width: 767px) {
      body { padding: 10px; }
      .search-interface-frame {
        padding: 20px;
        padding-top: 25px;
        margin-top: 60px; 
        max-height: calc(100vh - 90px);
      }
      #header-logo-container { top: -70px; }
      #bigTitle { max-width: 130px; }
      .interface-title-header { padding: 15px 20px; margin-bottom: 20px; }
      .interface-title { font-size: 1.6em; }
      /* Clock and input font already PrimaryFont in their own rules, SecondaryFont was for clock */
      #clock { font-size: 0.95rem; margin-bottom: 20px; } 
      #uv-address { padding: 14px 20px; font-size: 0.95rem; }
      #popularSites .btn { font-size: 0.7rem; padding: 8px 15px;}
      #popularSites .btn .icon { font-size: 1em; }
    }
  </style>
</head>
<body>
  <canvas id="starsCanvas"></canvas>

  <div class="search-interface-frame">
    <div id="header-logo-container">
      <img src="../images/title.png" alt="VERN MAX Logo" id="bigTitle" />
    </div>

    <div class="interface-title-header">
      <h2 class="interface-title">VERN MAX</h2>
    </div>

    <div id="searchElementsContainer">
      <form id="uv-form">
        <input id="uv-search-engine" value="https://duckduckgo.com/search?q=%s" type="hidden" />
        <input id="uv-address" type="text" placeholder="Search, or type a URL" class="form__input" />
      </form>
      <div id="popularSites">
        <a class="btn" onclick="autofill('http://xbox.com/play')"><span class="icon"><i class="fa-brands fa-xbox"></i></span>XBOX</a>
        <a class="btn" onclick="autofill('http://youtube.com')"><span class="icon"><i class="fa-brands fa-youtube"></i></span>YOUTUBE</a>
        <a class="btn" onclick="autofill('https://tiktok.com')"><span class="icon"><i class="fa-brands fa-tiktok"></i></span>TIKTOK</a>
        <a class="btn" onclick="autofill('https://chatgpt.com')"><span class="icon"><i class="fa-solid fa-brain"></i></span>CHATGPT</a>
        <a class="btn" onclick="autofill('http://apple.com')"><span class="icon"><i class="fa-brands fa-apple"></i></span>APPLE</a>
        <a class="btn" onclick="autofill('http://gemini.google.com')"><span class="icon"><i class="fa-solid fa-wand-magic-sparkles"></i></span>GEMINI</a>
        <a class="btn" onclick="autofill('http://totaljerkface.com')"><span class="icon"><i class="fa-solid fa-person-biking"></i></span>HAPPY WHEELS</a>
      </div>
      <div class="desc"> 
          <p id="uv-error"></p>
      </div>
    </div>
  </div>

  <span class="footer-label">Official 4SP Proxy</span>

  <script src="uv/uv.bundle.js" charset="UTF-8" defer></script>
  <script src="uv/uv.config.js" charset="UTF-8" defer></script>
  <script src="register-sw.js" charset="UTF-8" defer></script>
  <script src="search.js" charset="UTF-8" defer></script>
  <script src="index.js" charset="UTF-8" defer></script>

  <script>
    function updateClock() {
      const clockElement = document.getElementById('clock');
      if (clockElement) {
        const now = new Date();
        // Consistently use 12-hour format with AM/PM
        const timeString = now.toLocaleTimeString([], { 
            hour: '2-digit', 
            minute: '2-digit', 
            second: '2-digit', 
            hour12: true 
        });
        clockElement.textContent = timeString;
      }
    }
    updateClock();
    setInterval(updateClock, 1000);

    function autofill(url) {
      const searchInput = document.getElementById('uv-address');
      if (searchInput) { searchInput.value = url; }
      console.log("Autofill called with: " + url);
    }

    const canvas = document.getElementById('starsCanvas');
    const ctx = canvas.getContext('2d');
    const STAR_COLOR = 'rgba(221, 221, 221, 0.6)';
    const STAR_COUNT = 75;
    const STAR_SPEED_MIN = 0.5;
    const STAR_SPEED_MAX = 2.5;
    const STAR_LENGTH_MIN = 20;
    const STAR_LENGTH_MAX = 70;
    const STAR_WIDTH = 1.5;
    const NEW_STAR_INTERVAL = 80;
    let stars = [];

    function setCanvasSize() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }

    class Star {
      constructor() { this.reset(); }
      reset() {
        this.speed = Math.random() * (STAR_SPEED_MAX - STAR_SPEED_MIN) + STAR_SPEED_MIN;
        const componentSpeed = this.speed * Math.SQRT1_2;
        this.vx = componentSpeed; this.vy = componentSpeed;
        this.length = Math.random() * (STAR_LENGTH_MAX - STAR_LENGTH_MIN) + STAR_LENGTH_MIN;
        this.opacity = 0.4 + Math.random() * 0.6;
        let startX, startY;
        const spawnEdgePoint = Math.random() * (canvas.width + canvas.height);
        if (spawnEdgePoint < canvas.width) { startX = spawnEdgePoint; startY = 0; }
        else { startX = 0; startY = spawnEdgePoint - canvas.width; }
        const backwardDistance = Math.random() * (Math.max(canvas.width, canvas.height) * 0.6) + this.length;
        this.x = startX - backwardDistance * Math.SQRT1_2;
        this.y = startY - backwardDistance * Math.SQRT1_2;
      }
      draw() {
        const magnitude = this.speed; if (magnitude === 0) return;
        const tailDx = (this.vx / magnitude) * this.length; const tailDy = (this.vy / magnitude) * this.length;
        const tailX = this.x - tailDx; const tailY = this.y - tailDy;
        ctx.beginPath(); ctx.moveTo(this.x, this.y); ctx.lineTo(tailX, tailY);
        ctx.strokeStyle = STAR_COLOR.replace(/,\s*\d?\.?\d*\)$/, `, ${this.opacity})`);
        ctx.lineWidth = STAR_WIDTH; ctx.lineCap = 'round'; ctx.stroke();
      }
      update() {
        this.x += this.vx; this.y += this.vy; this.opacity -= 0.0015;
        if (this.x - this.length > canvas.width || this.y - this.length > canvas.height || this.opacity <= 0) {
          this.reset();
        }
      }
    }
    function initStars() {
      stars = []; setCanvasSize();
      for (let i = 0; i < STAR_COUNT; i++) {
        setTimeout(() => stars.push(new Star()), i * (NEW_STAR_INTERVAL / 2.5));
      }
    }
    function animateStars() {
      if (canvas.width > 0 && canvas.height > 0) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        stars.forEach(star => { star.update(); star.draw(); });
      }
      requestAnimationFrame(animateStars);
    }
    let resizeTimeout;
    window.addEventListener('resize', () => {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(() => setCanvasSize(), 200);
    });
    if (document.fonts) {
      document.fonts.ready.then(() => { initStars(); animateStars(); });
    } else {
      initStars(); animateStars();
    }
  </script>
</body>
</html>
